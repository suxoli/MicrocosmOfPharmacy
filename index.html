<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <!-- 参考第二份文档优化视口配置，提升多设备适配 -->
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=yes">
    <!-- 保留WebGL兼容配置 -->
    <meta name="webgl" content="true">
    <meta name="allow-webgl" content="true">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="x-rim-auto-match" content="none">
    <meta name="format-detection" content="telephone=no">
    <meta name="full-screen" content="yes">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="x5-page-mode" content="app">
    <meta name="browsermode" content="application">
    <title>YYSMART | MicrocosmOfPharmacy</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <style>
        /* 参考第二份文档简化重置样式，保留核心重置逻辑 */
        * {
            margin: 0;
            padding: 0;
            font-style: normal;
            box-sizing: border-box;
        }

        a {
            text-decoration: none;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        /* 参考第二份文档优化根节点样式，提升全屏适配 */
        html {
            font-size: 12px;
            height: -webkit-fill-available;
            -webkit-text-size-adjust: none !important;
            -moz-text-size-adjust: none !important;
            -ms-text-size-adjust: none !important;
            text-size-adjust: none !important;
        }

        body {
            min-height: 100vh;
            min-height: -webkit-fill-available;
            width: 100vw;
            overflow: hidden;
            position: relative;
        }

        /* 封装iframe容器，参考第二份文档的unity-container风格 */
        #frame-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        #Frame {
            border: none;
            display: block;
            width: 100%;
            height: 100%;
            /* 保留WebGL渲染优化 */
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            perspective: 1000px;
            transition: transform 0.3s ease; /* 新增过渡动画，提升旋转流畅度 */
        }

        /* 优化横竖屏旋转样式，简化逻辑 */
        .landscape-screen {
            transform-origin: top left;
            transform: rotate(90deg) translateY(-100%);
            width: 100vh !important;
            height: 100vw !important;
        }
    </style>
</head>
<body>
    <!-- 参考第二份文档的容器封装方式，新增iframe容器 -->
    <div id="frame-container">
        <iframe id="Frame"
                src=""
                allow="camera *; microphone *; fullscreen *; webgl *; accelerometer *"
                allowfullscreen="true"
                webkitallowfullscreen="true"
                mozallowfullscreen="true">
        </iframe>
    </div>

    <script>
        // 初始化变量，参考第二份文档的初始化风格
        let orientation = window.orientation || window.screen.orientation.angle;
        const Frame = document.getElementById("Frame");
        const frameContainer = document.getElementById("frame-container");

        // 初始化iframe链接，提示信息改为中文
        if (Frame) {
            Frame.src = "game.html";
        } else {
            console.error("未找到ID为Frame的iframe元素");
        }

        // 封装横竖屏处理函数，提升代码复用性
        function handleOrientationChange() {
            orientation = window.orientation || window.screen.orientation.angle;
            // 竖屏状态（0/180/-180度）
            if ([0, 180, -180].includes(orientation)) {
                Frame.classList.add("landscape-screen");
            } else {
                Frame.classList.remove("landscape-screen");
            }
            // 旋转后重置渲染上下文，保留原有逻辑
            Frame.style.display = 'none';
            setTimeout(() => Frame.style.display = 'block', 50);
        }

        // 初始执行横竖屏处理
        handleOrientationChange();

        // 监听横竖屏切换事件，兼容不同浏览器
        window.addEventListener('orientationchange', handleOrientationChange);
        window.addEventListener('screenorientationchange', handleOrientationChange);

        // 屏蔽媒体设备报错，提示信息改为中文
        if (!navigator.mediaDevices) {
            navigator.mediaDevices = {
                getUserMedia: () => Promise.reject('摄像头访问已禁用'),
                enumerateDevices: () => Promise.resolve([])
            };
        }
    </script>
</body>
</html>
